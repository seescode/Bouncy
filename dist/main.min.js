(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"C:\\Users\\yong\\Documents\\GitHub\\Bouncy\\src\\js\\entities\\box.js":[function(require,module,exports){
/* global prototype */
var Box = function (game, x, y, velocityX) {
    
    //Phaser.Sprite.call(this, game, x, y, 'box');

    //sprite = game.add.tileSprite(x, y, 50, 50, 'starfield');

    Phaser.TileSprite.call(this, game, x, y, 50, 50, 'box')
    
    this.autoScroll(-100, 0);  

    this.game.physics.arcade.enable(this);

    this.body.collideWorldBounds = true;
    this.body.bounce.set(1);
    this.body.velocity.x = velocityX;
    
};

Box.prototype = Object.create(Phaser.TileSprite.prototype);
Box.prototype.constructor = Box;

module.exports = Box;
},{}],"C:\\Users\\yong\\Documents\\GitHub\\Bouncy\\src\\js\\entities\\qumark.js":[function(require,module,exports){
var Qumark = function(game, x, y, cursors) {
  this.cursors = cursors;
  Phaser.Sprite.call(this, game, x, y, 'spriteSheet');
    
  this.animations.add('left', [12,13], 10, true);
  this.animations.add('right', [4,5], 10, true);
  
  this.animations.play('left');

  this.game.physics.arcade.enable(this);

  this.body.collideWorldBounds = true;
  this.body.bounce.set(1);
};

Qumark.prototype = Object.create(Phaser.Sprite.prototype);
Qumark.prototype.constructor = Qumark;


Qumark.prototype.update = function() {
  
  // check to see if our angle is less than 90
  // if it is rotate the bird towards the ground by 2.5 degrees
    
  if (this.cursors.left.isDown) {
    this.body.velocity.x = -200;
    this.animations.play('left');
  }
  else if (this.cursors.right.isDown) {
    this.body.velocity.x = 200;
    this.animations.play('right');
  }
  
};


module.exports = Qumark;
},{}],"C:\\Users\\yong\\Documents\\GitHub\\Bouncy\\src\\js\\main.js":[function(require,module,exports){
'use strict';

var game = new Phaser.Game(800, 640, Phaser.AUTO, 'bouncy-game');

window.Utils = require('./utils');
window.playerState = {
    currentLevel: 'Game'
}

game.state.add('Boot', require('./states/boot'));
game.state.add('Splash', require('./states/splash'));
game.state.add('Preloader', require('./states/preloader'));
game.state.add('Menu', require('./states/menu'));
game.state.add('Game', require('./states/game'));
game.state.add('GameOver', require('./states/gameover'));

game.state.start('Boot');

},{"./states/boot":"C:\\Users\\yong\\Documents\\GitHub\\Bouncy\\src\\js\\states\\boot.js","./states/game":"C:\\Users\\yong\\Documents\\GitHub\\Bouncy\\src\\js\\states\\game.js","./states/gameover":"C:\\Users\\yong\\Documents\\GitHub\\Bouncy\\src\\js\\states\\gameover.js","./states/menu":"C:\\Users\\yong\\Documents\\GitHub\\Bouncy\\src\\js\\states\\menu.js","./states/preloader":"C:\\Users\\yong\\Documents\\GitHub\\Bouncy\\src\\js\\states\\preloader.js","./states/splash":"C:\\Users\\yong\\Documents\\GitHub\\Bouncy\\src\\js\\states\\splash.js","./utils":"C:\\Users\\yong\\Documents\\GitHub\\Bouncy\\src\\js\\utils.js"}],"C:\\Users\\yong\\Documents\\GitHub\\Bouncy\\src\\js\\states\\boot.js":[function(require,module,exports){
var Boot = function () {};

module.exports = Boot;

Boot.prototype = {

  preload: function () {
    this.load.image('preloader', 'assets/preloader.gif');
  },

  create: function () {
    this.game.input.maxPointers = 1;

    if (this.game.device.desktop) {
      this.game.stage.scale.pageAlignHorizontally = true;
    } else {
      this.game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
      this.game.scale.minWidth =  480;
      this.game.scale.minHeight = 260;
      this.game.scale.maxWidth = 640;
      this.game.scale.maxHeight = 480;
      this.game.scale.forceLandscape = true;
      this.game.scale.pageAlignHorizontally = true;
      this.game.scale.setScreenSize(true);
    }

    this.game.state.start('Preloader');
  }
};

},{}],"C:\\Users\\yong\\Documents\\GitHub\\Bouncy\\src\\js\\states\\game.js":[function(require,module,exports){
var Qumark = require('../entities/qumark');
var Box = require('../entities/box');
var MarioTilemap = require('../tilemaps/marioTilemap');


var Game = function () {
  this.testentity = null;
};

module.exports = Game;

Game.prototype = {

  create: function () {
    this.cursors = this.game.input.keyboard.createCursorKeys();
    
    
    this.layer = new MarioTilemap(this.game);
    
    this.text = this.game.add.text(10, 10, '0 POINTS', { font: "12px Arial", fill: "#ff0044" });


    //Create boxes
    this.boxes = this.game.add.group();
    this.boxes.enableBody = true;
    this.physicsBodyType = Phaser.Physics.ARCADE;
    
    this.boxes.add(new Box(this.game, 750, 150, -300));   
    this.boxes.add(new Box(this.game, 500, 150, -150));   
    this.boxes.add(new Box(this.game, 300, 150, -150));   
     
    this.game.physics.arcade.gravity.set(0, 500);
    
    
    this.qumark = new Qumark(this.game, 100, 100, this.cursors);
    this.game.camera.follow(this.qumark);
    this.game.add.existing(this.qumark);


    //this.box.body.collideWorldBounds = true;

    //this.box.body.bounce.set(1);

    //this.box.body.velocity.x = -150;
    
    //this says make tile 4,5,14,15 be collidable
    //Note that the texture map starts from index 1.
    
//     var killCoin = function(player, coin) {
//       //this.map.replace(1, 18, 1, 1);
//       //coin.index = 1;
//       coin.copy(this.map.getTile(1, 1));
//     };
// 
//     this.map.setTileIndexCallback(18, killCoin, this); 
// 
    
  },

  update: function () {
    var me = this; //TODO make more elegant solution
    
    this.game.physics.arcade.collide(this.qumark, this.layer);
    
    this.game.physics.arcade.collide(this.boxes, this.layer);
    
    this.game.physics.arcade.collide(this.qumark, this.boxes, function () {
      me.game.state.start("GameOver");
      
      
      //box.tilePosition.x += 8;
    });

  }

};

},{"../entities/box":"C:\\Users\\yong\\Documents\\GitHub\\Bouncy\\src\\js\\entities\\box.js","../entities/qumark":"C:\\Users\\yong\\Documents\\GitHub\\Bouncy\\src\\js\\entities\\qumark.js","../tilemaps/marioTilemap":"C:\\Users\\yong\\Documents\\GitHub\\Bouncy\\src\\js\\tilemaps\\marioTilemap.js"}],"C:\\Users\\yong\\Documents\\GitHub\\Bouncy\\src\\js\\states\\gameover.js":[function(require,module,exports){
var GameOver = function() {
};

module.exports = GameOver;

GameOver.prototype = {

    create:  function () {      
        this.cursors = this.game.input.keyboard.createCursorKeys();
        this.title = this.game.add.text(10, 10, 'Game is over try again', { font: "12px Arial", fill: "#ff0044" }); 
    },
    
    update: function() {

        if (this.cursors.left.isDown) {
			this.game.state.start("Game");	
        }
        else if (this.cursors.right.isDown) {
            this.game.state.start("Game");
        }


    }

};

},{}],"C:\\Users\\yong\\Documents\\GitHub\\Bouncy\\src\\js\\states\\menu.js":[function(require,module,exports){
var Menu = function () {
  this.text = null;
};

module.exports = Menu;

Menu.prototype = {

  create: function () {
    this.cursors = this.game.input.keyboard.createCursorKeys();
    this.title = this.game.add.text(10, 10, 'Bouncy!', { font: "12px Arial", fill: "#ff0044" });
  },

  update: function () {
    
    if (this.cursors.left.isDown) {
      this.game.state.start("Game");
    }
    else if (this.cursors.right.isDown) {
      this.game.state.start("Game");
    }
  }
};

},{}],"C:\\Users\\yong\\Documents\\GitHub\\Bouncy\\src\\js\\states\\preloader.js":[function(require,module,exports){
var Preloader = function (game) {
  this.asset = null;
  this.ready = false;
};

module.exports = Preloader;

Preloader.prototype = {

  preload: function () {
    //this.asset = this.add.sprite(320, 240, 'preloader');
    //this.asset.anchor.setTo(0.5, 0.5);

    //this.load.onLoadComplete.addOnce(this.onLoadComplete, this);
    //this.load.setPreloadSprite(this.asset);    
    this.load.image('box', 'assets/starfield.png');
    
    this.load.image('qumark', 'assets/qumark.bmp');
    
    this.load.spritesheet('spriteSheet', 'assets/sheet_characters.png', 32, 32);
    
    
    this.game.load.tilemap('tilemap', 'assets/MarioTileMap.json', null, Phaser.Tilemap.TILED_JSON);
    
    //'Tiles' matches what's in tilesets.name within FirstTileMap.json
    //this.game.load.image('Tiles', 'assets/terrain_atlas.png');
    this.game.load.image('Tiles', 'assets/super_mario.png');
    
  },

  create: function () {
    console.log('hello'
    );
  },

  update: function () {
      this.game.state.start('Menu');
    
  },

  onLoadComplete: function () {
    this.ready = true;
  }
};

},{}],"C:\\Users\\yong\\Documents\\GitHub\\Bouncy\\src\\js\\states\\splash.js":[function(require,module,exports){
var Splash = function () {
};

module.exports = Splash;

Splash.prototype = {
  create: function () {
  }
};
},{}],"C:\\Users\\yong\\Documents\\GitHub\\Bouncy\\src\\js\\tilemaps\\marioTilemap.js":[function(require,module,exports){
var MarioTilemap = function(game) {
    this.map = game.add.tilemap('tilemap');   

    //'Tiles' matches what's in tilesets.name within FirstTileMap.json    
    this.map.addTilesetImage('Tiles');

    //'Tile Layer 1' matches what's in FirstTileMap.json
    this.layer = this.map.createLayer('Tile Layer 1');     
    this.layer.resizeWorld();
    //this.layer.wrap = true;
    
    this.map.createFromTiles(18, null, 'coins', 'Tile Layer 1');
    this.map.setCollisionBetween(4, 5);
    this.map.setCollisionBetween(14, 15);


    return this.layer;
};

MarioTilemap.prototype = Object.create(Phaser.Sprite.prototype);
MarioTilemap.prototype.constructor = MarioTilemap;


MarioTilemap.prototype.update = function() {
  
  // check to see if our angle is less than 90
  // if it is rotate the bird towards the ground by 2.5 degrees
    
  if (this.cursors.left.isDown) {
    this.body.velocity.x = -200;
    this.animations.play('left');
  }
  else if (this.cursors.right.isDown) {
    this.body.velocity.x = 200;
    this.animations.play('right');
  }
  
};


module.exports = MarioTilemap;
},{}],"C:\\Users\\yong\\Documents\\GitHub\\Bouncy\\src\\js\\utils.js":[function(require,module,exports){
var Utils = {
    containsObject: function(obj, list) {
        var i;
        for (i = 0; i < list.length; i++) {
            if (list[i] === obj) {
                return true;
            }
        }

        return false;
    }
};

module.exports = Utils;
},{}]},{},["C:\\Users\\yong\\Documents\\GitHub\\Bouncy\\src\\js\\main.js"])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvZW50aXRpZXMvYm94LmpzIiwic3JjL2pzL2VudGl0aWVzL3F1bWFyay5qcyIsInNyYy9qcy9tYWluLmpzIiwic3JjL2pzL3N0YXRlcy9ib290LmpzIiwic3JjL2pzL3N0YXRlcy9nYW1lLmpzIiwic3JjL2pzL3N0YXRlcy9nYW1lb3Zlci5qcyIsInNyYy9qcy9zdGF0ZXMvbWVudS5qcyIsInNyYy9qcy9zdGF0ZXMvcHJlbG9hZGVyLmpzIiwic3JjL2pzL3N0YXRlcy9zcGxhc2guanMiLCJzcmMvanMvdGlsZW1hcHMvbWFyaW9UaWxlbWFwLmpzIiwic3JjL2pzL3V0aWxzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyogZ2xvYmFsIHByb3RvdHlwZSAqL1xyXG52YXIgQm94ID0gZnVuY3Rpb24gKGdhbWUsIHgsIHksIHZlbG9jaXR5WCkge1xyXG4gICAgXHJcbiAgICAvL1BoYXNlci5TcHJpdGUuY2FsbCh0aGlzLCBnYW1lLCB4LCB5LCAnYm94Jyk7XHJcblxyXG4gICAgLy9zcHJpdGUgPSBnYW1lLmFkZC50aWxlU3ByaXRlKHgsIHksIDUwLCA1MCwgJ3N0YXJmaWVsZCcpO1xyXG5cclxuICAgIFBoYXNlci5UaWxlU3ByaXRlLmNhbGwodGhpcywgZ2FtZSwgeCwgeSwgNTAsIDUwLCAnYm94JylcclxuICAgIFxyXG4gICAgdGhpcy5hdXRvU2Nyb2xsKC0xMDAsIDApOyAgXHJcblxyXG4gICAgdGhpcy5nYW1lLnBoeXNpY3MuYXJjYWRlLmVuYWJsZSh0aGlzKTtcclxuXHJcbiAgICB0aGlzLmJvZHkuY29sbGlkZVdvcmxkQm91bmRzID0gdHJ1ZTtcclxuICAgIHRoaXMuYm9keS5ib3VuY2Uuc2V0KDEpO1xyXG4gICAgdGhpcy5ib2R5LnZlbG9jaXR5LnggPSB2ZWxvY2l0eVg7XHJcbiAgICBcclxufTtcclxuXHJcbkJveC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBoYXNlci5UaWxlU3ByaXRlLnByb3RvdHlwZSk7XHJcbkJveC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCb3g7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEJveDsiLCJ2YXIgUXVtYXJrID0gZnVuY3Rpb24oZ2FtZSwgeCwgeSwgY3Vyc29ycykge1xyXG4gIHRoaXMuY3Vyc29ycyA9IGN1cnNvcnM7XHJcbiAgUGhhc2VyLlNwcml0ZS5jYWxsKHRoaXMsIGdhbWUsIHgsIHksICdzcHJpdGVTaGVldCcpO1xyXG4gICAgXHJcbiAgdGhpcy5hbmltYXRpb25zLmFkZCgnbGVmdCcsIFsxMiwxM10sIDEwLCB0cnVlKTtcclxuICB0aGlzLmFuaW1hdGlvbnMuYWRkKCdyaWdodCcsIFs0LDVdLCAxMCwgdHJ1ZSk7XHJcbiAgXHJcbiAgdGhpcy5hbmltYXRpb25zLnBsYXkoJ2xlZnQnKTtcclxuXHJcbiAgdGhpcy5nYW1lLnBoeXNpY3MuYXJjYWRlLmVuYWJsZSh0aGlzKTtcclxuXHJcbiAgdGhpcy5ib2R5LmNvbGxpZGVXb3JsZEJvdW5kcyA9IHRydWU7XHJcbiAgdGhpcy5ib2R5LmJvdW5jZS5zZXQoMSk7XHJcbn07XHJcblxyXG5RdW1hcmsucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQaGFzZXIuU3ByaXRlLnByb3RvdHlwZSk7XHJcblF1bWFyay5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBRdW1hcms7XHJcblxyXG5cclxuUXVtYXJrLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpIHtcclxuICBcclxuICAvLyBjaGVjayB0byBzZWUgaWYgb3VyIGFuZ2xlIGlzIGxlc3MgdGhhbiA5MFxyXG4gIC8vIGlmIGl0IGlzIHJvdGF0ZSB0aGUgYmlyZCB0b3dhcmRzIHRoZSBncm91bmQgYnkgMi41IGRlZ3JlZXNcclxuICAgIFxyXG4gIGlmICh0aGlzLmN1cnNvcnMubGVmdC5pc0Rvd24pIHtcclxuICAgIHRoaXMuYm9keS52ZWxvY2l0eS54ID0gLTIwMDtcclxuICAgIHRoaXMuYW5pbWF0aW9ucy5wbGF5KCdsZWZ0Jyk7XHJcbiAgfVxyXG4gIGVsc2UgaWYgKHRoaXMuY3Vyc29ycy5yaWdodC5pc0Rvd24pIHtcclxuICAgIHRoaXMuYm9keS52ZWxvY2l0eS54ID0gMjAwO1xyXG4gICAgdGhpcy5hbmltYXRpb25zLnBsYXkoJ3JpZ2h0Jyk7XHJcbiAgfVxyXG4gIFxyXG59O1xyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUXVtYXJrOyIsIid1c2Ugc3RyaWN0JztcblxudmFyIGdhbWUgPSBuZXcgUGhhc2VyLkdhbWUoODAwLCA2NDAsIFBoYXNlci5BVVRPLCAnYm91bmN5LWdhbWUnKTtcblxud2luZG93LlV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xud2luZG93LnBsYXllclN0YXRlID0ge1xuICAgIGN1cnJlbnRMZXZlbDogJ0dhbWUnXG59XG5cbmdhbWUuc3RhdGUuYWRkKCdCb290JywgcmVxdWlyZSgnLi9zdGF0ZXMvYm9vdCcpKTtcbmdhbWUuc3RhdGUuYWRkKCdTcGxhc2gnLCByZXF1aXJlKCcuL3N0YXRlcy9zcGxhc2gnKSk7XG5nYW1lLnN0YXRlLmFkZCgnUHJlbG9hZGVyJywgcmVxdWlyZSgnLi9zdGF0ZXMvcHJlbG9hZGVyJykpO1xuZ2FtZS5zdGF0ZS5hZGQoJ01lbnUnLCByZXF1aXJlKCcuL3N0YXRlcy9tZW51JykpO1xuZ2FtZS5zdGF0ZS5hZGQoJ0dhbWUnLCByZXF1aXJlKCcuL3N0YXRlcy9nYW1lJykpO1xuZ2FtZS5zdGF0ZS5hZGQoJ0dhbWVPdmVyJywgcmVxdWlyZSgnLi9zdGF0ZXMvZ2FtZW92ZXInKSk7XG5cbmdhbWUuc3RhdGUuc3RhcnQoJ0Jvb3QnKTtcbiIsInZhciBCb290ID0gZnVuY3Rpb24gKCkge307XG5cbm1vZHVsZS5leHBvcnRzID0gQm9vdDtcblxuQm9vdC5wcm90b3R5cGUgPSB7XG5cbiAgcHJlbG9hZDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMubG9hZC5pbWFnZSgncHJlbG9hZGVyJywgJ2Fzc2V0cy9wcmVsb2FkZXIuZ2lmJyk7XG4gIH0sXG5cbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5nYW1lLmlucHV0Lm1heFBvaW50ZXJzID0gMTtcblxuICAgIGlmICh0aGlzLmdhbWUuZGV2aWNlLmRlc2t0b3ApIHtcbiAgICAgIHRoaXMuZ2FtZS5zdGFnZS5zY2FsZS5wYWdlQWxpZ25Ib3Jpem9udGFsbHkgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmdhbWUuc2NhbGUuc2NhbGVNb2RlID0gUGhhc2VyLlNjYWxlTWFuYWdlci5TSE9XX0FMTDtcbiAgICAgIHRoaXMuZ2FtZS5zY2FsZS5taW5XaWR0aCA9ICA0ODA7XG4gICAgICB0aGlzLmdhbWUuc2NhbGUubWluSGVpZ2h0ID0gMjYwO1xuICAgICAgdGhpcy5nYW1lLnNjYWxlLm1heFdpZHRoID0gNjQwO1xuICAgICAgdGhpcy5nYW1lLnNjYWxlLm1heEhlaWdodCA9IDQ4MDtcbiAgICAgIHRoaXMuZ2FtZS5zY2FsZS5mb3JjZUxhbmRzY2FwZSA9IHRydWU7XG4gICAgICB0aGlzLmdhbWUuc2NhbGUucGFnZUFsaWduSG9yaXpvbnRhbGx5ID0gdHJ1ZTtcbiAgICAgIHRoaXMuZ2FtZS5zY2FsZS5zZXRTY3JlZW5TaXplKHRydWUpO1xuICAgIH1cblxuICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydCgnUHJlbG9hZGVyJyk7XG4gIH1cbn07XG4iLCJ2YXIgUXVtYXJrID0gcmVxdWlyZSgnLi4vZW50aXRpZXMvcXVtYXJrJyk7XHJcbnZhciBCb3ggPSByZXF1aXJlKCcuLi9lbnRpdGllcy9ib3gnKTtcclxudmFyIE1hcmlvVGlsZW1hcCA9IHJlcXVpcmUoJy4uL3RpbGVtYXBzL21hcmlvVGlsZW1hcCcpO1xyXG5cclxuXHJcbnZhciBHYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gIHRoaXMudGVzdGVudGl0eSA9IG51bGw7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEdhbWU7XHJcblxyXG5HYW1lLnByb3RvdHlwZSA9IHtcclxuXHJcbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmN1cnNvcnMgPSB0aGlzLmdhbWUuaW5wdXQua2V5Ym9hcmQuY3JlYXRlQ3Vyc29yS2V5cygpO1xyXG4gICAgXHJcbiAgICBcclxuICAgIHRoaXMubGF5ZXIgPSBuZXcgTWFyaW9UaWxlbWFwKHRoaXMuZ2FtZSk7XHJcbiAgICBcclxuICAgIHRoaXMudGV4dCA9IHRoaXMuZ2FtZS5hZGQudGV4dCgxMCwgMTAsICcwIFBPSU5UUycsIHsgZm9udDogXCIxMnB4IEFyaWFsXCIsIGZpbGw6IFwiI2ZmMDA0NFwiIH0pO1xyXG5cclxuXHJcbiAgICAvL0NyZWF0ZSBib3hlc1xyXG4gICAgdGhpcy5ib3hlcyA9IHRoaXMuZ2FtZS5hZGQuZ3JvdXAoKTtcclxuICAgIHRoaXMuYm94ZXMuZW5hYmxlQm9keSA9IHRydWU7XHJcbiAgICB0aGlzLnBoeXNpY3NCb2R5VHlwZSA9IFBoYXNlci5QaHlzaWNzLkFSQ0FERTtcclxuICAgIFxyXG4gICAgdGhpcy5ib3hlcy5hZGQobmV3IEJveCh0aGlzLmdhbWUsIDc1MCwgMTUwLCAtMzAwKSk7ICAgXHJcbiAgICB0aGlzLmJveGVzLmFkZChuZXcgQm94KHRoaXMuZ2FtZSwgNTAwLCAxNTAsIC0xNTApKTsgICBcclxuICAgIHRoaXMuYm94ZXMuYWRkKG5ldyBCb3godGhpcy5nYW1lLCAzMDAsIDE1MCwgLTE1MCkpOyAgIFxyXG4gICAgIFxyXG4gICAgdGhpcy5nYW1lLnBoeXNpY3MuYXJjYWRlLmdyYXZpdHkuc2V0KDAsIDUwMCk7XHJcbiAgICBcclxuICAgIFxyXG4gICAgdGhpcy5xdW1hcmsgPSBuZXcgUXVtYXJrKHRoaXMuZ2FtZSwgMTAwLCAxMDAsIHRoaXMuY3Vyc29ycyk7XHJcbiAgICB0aGlzLmdhbWUuY2FtZXJhLmZvbGxvdyh0aGlzLnF1bWFyayk7XHJcbiAgICB0aGlzLmdhbWUuYWRkLmV4aXN0aW5nKHRoaXMucXVtYXJrKTtcclxuXHJcblxyXG4gICAgLy90aGlzLmJveC5ib2R5LmNvbGxpZGVXb3JsZEJvdW5kcyA9IHRydWU7XHJcblxyXG4gICAgLy90aGlzLmJveC5ib2R5LmJvdW5jZS5zZXQoMSk7XHJcblxyXG4gICAgLy90aGlzLmJveC5ib2R5LnZlbG9jaXR5LnggPSAtMTUwO1xyXG4gICAgXHJcbiAgICAvL3RoaXMgc2F5cyBtYWtlIHRpbGUgNCw1LDE0LDE1IGJlIGNvbGxpZGFibGVcclxuICAgIC8vTm90ZSB0aGF0IHRoZSB0ZXh0dXJlIG1hcCBzdGFydHMgZnJvbSBpbmRleCAxLlxyXG4gICAgXHJcbi8vICAgICB2YXIga2lsbENvaW4gPSBmdW5jdGlvbihwbGF5ZXIsIGNvaW4pIHtcclxuLy8gICAgICAgLy90aGlzLm1hcC5yZXBsYWNlKDEsIDE4LCAxLCAxKTtcclxuLy8gICAgICAgLy9jb2luLmluZGV4ID0gMTtcclxuLy8gICAgICAgY29pbi5jb3B5KHRoaXMubWFwLmdldFRpbGUoMSwgMSkpO1xyXG4vLyAgICAgfTtcclxuLy8gXHJcbi8vICAgICB0aGlzLm1hcC5zZXRUaWxlSW5kZXhDYWxsYmFjaygxOCwga2lsbENvaW4sIHRoaXMpOyBcclxuLy8gXHJcbiAgICBcclxuICB9LFxyXG5cclxuICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBtZSA9IHRoaXM7IC8vVE9ETyBtYWtlIG1vcmUgZWxlZ2FudCBzb2x1dGlvblxyXG4gICAgXHJcbiAgICB0aGlzLmdhbWUucGh5c2ljcy5hcmNhZGUuY29sbGlkZSh0aGlzLnF1bWFyaywgdGhpcy5sYXllcik7XHJcbiAgICBcclxuICAgIHRoaXMuZ2FtZS5waHlzaWNzLmFyY2FkZS5jb2xsaWRlKHRoaXMuYm94ZXMsIHRoaXMubGF5ZXIpO1xyXG4gICAgXHJcbiAgICB0aGlzLmdhbWUucGh5c2ljcy5hcmNhZGUuY29sbGlkZSh0aGlzLnF1bWFyaywgdGhpcy5ib3hlcywgZnVuY3Rpb24gKCkge1xyXG4gICAgICBtZS5nYW1lLnN0YXRlLnN0YXJ0KFwiR2FtZU92ZXJcIik7XHJcbiAgICAgIFxyXG4gICAgICBcclxuICAgICAgLy9ib3gudGlsZVBvc2l0aW9uLnggKz0gODtcclxuICAgIH0pO1xyXG5cclxuICB9XHJcblxyXG59O1xyXG4iLCJ2YXIgR2FtZU92ZXIgPSBmdW5jdGlvbigpIHtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gR2FtZU92ZXI7XHJcblxyXG5HYW1lT3Zlci5wcm90b3R5cGUgPSB7XHJcblxyXG4gICAgY3JlYXRlOiAgZnVuY3Rpb24gKCkgeyAgICAgIFxyXG4gICAgICAgIHRoaXMuY3Vyc29ycyA9IHRoaXMuZ2FtZS5pbnB1dC5rZXlib2FyZC5jcmVhdGVDdXJzb3JLZXlzKCk7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRoaXMuZ2FtZS5hZGQudGV4dCgxMCwgMTAsICdHYW1lIGlzIG92ZXIgdHJ5IGFnYWluJywgeyBmb250OiBcIjEycHggQXJpYWxcIiwgZmlsbDogXCIjZmYwMDQ0XCIgfSk7IFxyXG4gICAgfSxcclxuICAgIFxyXG4gICAgdXBkYXRlOiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY3Vyc29ycy5sZWZ0LmlzRG93bikge1xyXG5cdFx0XHR0aGlzLmdhbWUuc3RhdGUuc3RhcnQoXCJHYW1lXCIpO1x0XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuY3Vyc29ycy5yaWdodC5pc0Rvd24pIHtcclxuICAgICAgICAgICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KFwiR2FtZVwiKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgIH1cclxuXHJcbn07XHJcbiIsInZhciBNZW51ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnRleHQgPSBudWxsO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBNZW51O1xuXG5NZW51LnByb3RvdHlwZSA9IHtcblxuICBjcmVhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmN1cnNvcnMgPSB0aGlzLmdhbWUuaW5wdXQua2V5Ym9hcmQuY3JlYXRlQ3Vyc29yS2V5cygpO1xuICAgIHRoaXMudGl0bGUgPSB0aGlzLmdhbWUuYWRkLnRleHQoMTAsIDEwLCAnQm91bmN5IScsIHsgZm9udDogXCIxMnB4IEFyaWFsXCIsIGZpbGw6IFwiI2ZmMDA0NFwiIH0pO1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xuICAgIFxuICAgIGlmICh0aGlzLmN1cnNvcnMubGVmdC5pc0Rvd24pIHtcbiAgICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydChcIkdhbWVcIik7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRoaXMuY3Vyc29ycy5yaWdodC5pc0Rvd24pIHtcbiAgICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydChcIkdhbWVcIik7XG4gICAgfVxuICB9XG59O1xuIiwidmFyIFByZWxvYWRlciA9IGZ1bmN0aW9uIChnYW1lKSB7XG4gIHRoaXMuYXNzZXQgPSBudWxsO1xuICB0aGlzLnJlYWR5ID0gZmFsc2U7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFByZWxvYWRlcjtcblxuUHJlbG9hZGVyLnByb3RvdHlwZSA9IHtcblxuICBwcmVsb2FkOiBmdW5jdGlvbiAoKSB7XG4gICAgLy90aGlzLmFzc2V0ID0gdGhpcy5hZGQuc3ByaXRlKDMyMCwgMjQwLCAncHJlbG9hZGVyJyk7XG4gICAgLy90aGlzLmFzc2V0LmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG5cbiAgICAvL3RoaXMubG9hZC5vbkxvYWRDb21wbGV0ZS5hZGRPbmNlKHRoaXMub25Mb2FkQ29tcGxldGUsIHRoaXMpO1xuICAgIC8vdGhpcy5sb2FkLnNldFByZWxvYWRTcHJpdGUodGhpcy5hc3NldCk7ICAgIFxuICAgIHRoaXMubG9hZC5pbWFnZSgnYm94JywgJ2Fzc2V0cy9zdGFyZmllbGQucG5nJyk7XG4gICAgXG4gICAgdGhpcy5sb2FkLmltYWdlKCdxdW1hcmsnLCAnYXNzZXRzL3F1bWFyay5ibXAnKTtcbiAgICBcbiAgICB0aGlzLmxvYWQuc3ByaXRlc2hlZXQoJ3Nwcml0ZVNoZWV0JywgJ2Fzc2V0cy9zaGVldF9jaGFyYWN0ZXJzLnBuZycsIDMyLCAzMik7XG4gICAgXG4gICAgXG4gICAgdGhpcy5nYW1lLmxvYWQudGlsZW1hcCgndGlsZW1hcCcsICdhc3NldHMvTWFyaW9UaWxlTWFwLmpzb24nLCBudWxsLCBQaGFzZXIuVGlsZW1hcC5USUxFRF9KU09OKTtcbiAgICBcbiAgICAvLydUaWxlcycgbWF0Y2hlcyB3aGF0J3MgaW4gdGlsZXNldHMubmFtZSB3aXRoaW4gRmlyc3RUaWxlTWFwLmpzb25cbiAgICAvL3RoaXMuZ2FtZS5sb2FkLmltYWdlKCdUaWxlcycsICdhc3NldHMvdGVycmFpbl9hdGxhcy5wbmcnKTtcbiAgICB0aGlzLmdhbWUubG9hZC5pbWFnZSgnVGlsZXMnLCAnYXNzZXRzL3N1cGVyX21hcmlvLnBuZycpO1xuICAgIFxuICB9LFxuXG4gIGNyZWF0ZTogZnVuY3Rpb24gKCkge1xuICAgIGNvbnNvbGUubG9nKCdoZWxsbydcbiAgICApO1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdNZW51Jyk7XG4gICAgXG4gIH0sXG5cbiAgb25Mb2FkQ29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnJlYWR5ID0gdHJ1ZTtcbiAgfVxufTtcbiIsInZhciBTcGxhc2ggPSBmdW5jdGlvbiAoKSB7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNwbGFzaDtcblxuU3BsYXNoLnByb3RvdHlwZSA9IHtcbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XG4gIH1cbn07IiwidmFyIE1hcmlvVGlsZW1hcCA9IGZ1bmN0aW9uKGdhbWUpIHtcclxuICAgIHRoaXMubWFwID0gZ2FtZS5hZGQudGlsZW1hcCgndGlsZW1hcCcpOyAgIFxyXG5cclxuICAgIC8vJ1RpbGVzJyBtYXRjaGVzIHdoYXQncyBpbiB0aWxlc2V0cy5uYW1lIHdpdGhpbiBGaXJzdFRpbGVNYXAuanNvbiAgICBcclxuICAgIHRoaXMubWFwLmFkZFRpbGVzZXRJbWFnZSgnVGlsZXMnKTtcclxuXHJcbiAgICAvLydUaWxlIExheWVyIDEnIG1hdGNoZXMgd2hhdCdzIGluIEZpcnN0VGlsZU1hcC5qc29uXHJcbiAgICB0aGlzLmxheWVyID0gdGhpcy5tYXAuY3JlYXRlTGF5ZXIoJ1RpbGUgTGF5ZXIgMScpOyAgICAgXHJcbiAgICB0aGlzLmxheWVyLnJlc2l6ZVdvcmxkKCk7XHJcbiAgICAvL3RoaXMubGF5ZXIud3JhcCA9IHRydWU7XHJcbiAgICBcclxuICAgIHRoaXMubWFwLmNyZWF0ZUZyb21UaWxlcygxOCwgbnVsbCwgJ2NvaW5zJywgJ1RpbGUgTGF5ZXIgMScpO1xyXG4gICAgdGhpcy5tYXAuc2V0Q29sbGlzaW9uQmV0d2Vlbig0LCA1KTtcclxuICAgIHRoaXMubWFwLnNldENvbGxpc2lvbkJldHdlZW4oMTQsIDE1KTtcclxuXHJcblxyXG4gICAgcmV0dXJuIHRoaXMubGF5ZXI7XHJcbn07XHJcblxyXG5NYXJpb1RpbGVtYXAucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQaGFzZXIuU3ByaXRlLnByb3RvdHlwZSk7XHJcbk1hcmlvVGlsZW1hcC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNYXJpb1RpbGVtYXA7XHJcblxyXG5cclxuTWFyaW9UaWxlbWFwLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpIHtcclxuICBcclxuICAvLyBjaGVjayB0byBzZWUgaWYgb3VyIGFuZ2xlIGlzIGxlc3MgdGhhbiA5MFxyXG4gIC8vIGlmIGl0IGlzIHJvdGF0ZSB0aGUgYmlyZCB0b3dhcmRzIHRoZSBncm91bmQgYnkgMi41IGRlZ3JlZXNcclxuICAgIFxyXG4gIGlmICh0aGlzLmN1cnNvcnMubGVmdC5pc0Rvd24pIHtcclxuICAgIHRoaXMuYm9keS52ZWxvY2l0eS54ID0gLTIwMDtcclxuICAgIHRoaXMuYW5pbWF0aW9ucy5wbGF5KCdsZWZ0Jyk7XHJcbiAgfVxyXG4gIGVsc2UgaWYgKHRoaXMuY3Vyc29ycy5yaWdodC5pc0Rvd24pIHtcclxuICAgIHRoaXMuYm9keS52ZWxvY2l0eS54ID0gMjAwO1xyXG4gICAgdGhpcy5hbmltYXRpb25zLnBsYXkoJ3JpZ2h0Jyk7XHJcbiAgfVxyXG4gIFxyXG59O1xyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gTWFyaW9UaWxlbWFwOyIsInZhciBVdGlscyA9IHtcbiAgICBjb250YWluc09iamVjdDogZnVuY3Rpb24ob2JqLCBsaXN0KSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGxpc3RbaV0gPT09IG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gVXRpbHM7Il19
